package com.mango.zombies.entities;

import com.mango.zombies.PluginCore;
import com.mango.zombies.serializers.ConfigEntityJsonSerializer;
import org.bukkit.Material;

import java.util.TimerTask;

public class ConfigEntity {

	//region Constant Values
	public static final boolean DEFAULT_AUTO_GENERATE_DEFAULT_ENEMIES = true;
	public static final boolean DEFAULT_AUTO_GENERATE_DEFAULT_PERKS = true;
	public static final boolean DEFAULT_AUTO_GENERATE_DEFAULT_WEAPONS = true;
	public static final boolean DEFAULT_ENABLE_DEBUGGING = false;

	public static final ConfigEntityJsonSerializer SERIALIZER = new ConfigEntityJsonSerializer();

	public static final int DEFAULT_AUTO_SAVE_TIMER_INTERVAL = 10;

	public static final Material DEFAULT_POSITION_TOOL_ITEM = Material.STICK;
	public static final Material DEFAULT_SPAWNING_TOOL_ITEM = Material.STICK;

	public static final String AUTO_GENERATE_DEFAULT_ENEMIES_JSON_TAG = "auto_generate_default_perks";
	public static final String AUTO_GENERATE_DEFAULT_PERKS_JSON_TAG = "auto_generate_default_perks";
	public static final String AUTO_GENERATE_DEFAULT_WEAPONS_JSON_TAG = "auto_generate_default_weapons";
	public static final String AUTO_SAVE_TIMER_INTERVAL_JSON_TAG = "auto_save_timer_interval";
	public static final String ENABLE_DEBUGGING_JSON_TAG = "enable_debugging";
	public static final String POSITION_TOOL_ITEM_JSON_TAG = "position_tool_item";
	public static final String SPAWNING_TOOL_ITEM_JSON_TAG = "spawning_tool_item";
	//endregion

	//region Fields
	private boolean autoGenerateDefaultEnemies = DEFAULT_AUTO_GENERATE_DEFAULT_ENEMIES;
	private boolean autoGenerateDefaultPerks = DEFAULT_AUTO_GENERATE_DEFAULT_PERKS;
	private boolean autoGenerateDefaultWeapons = DEFAULT_AUTO_GENERATE_DEFAULT_WEAPONS;
	private boolean enableDebugging = DEFAULT_ENABLE_DEBUGGING;

	private int autoSaveTimerInterval = DEFAULT_AUTO_SAVE_TIMER_INTERVAL;

	private Material positionToolItem = DEFAULT_POSITION_TOOL_ITEM;
	private Material spawningToolItem = DEFAULT_SPAWNING_TOOL_ITEM;
	//endregion

	//region Getters/Setters
	/**
	 * Gets whether default enemies should be generated automatically.
	 */
	public boolean doesAutoGenerateDefaultEnemies() {
		return autoGenerateDefaultEnemies;
	}

	/**
	 * Sets whether default enemies should be generated automatically.
	 */
	public void setAutoGenerateDefaultEnemies(boolean autoGenerateDefaultEnemies) {
		this.autoGenerateDefaultEnemies = autoGenerateDefaultEnemies;
	}

	/**
	 * Gets whether default perks should be generated automatically.
	 */
	public boolean doesAutoGenerateDefaultPerks() {
		return autoGenerateDefaultPerks;
	}

	/**
	 * Sets whether default perks should be generated automatically.
	 */
	public void setAutoGenerateDefaultPerks(boolean autoGenerateDefaultPerks) {
		this.autoGenerateDefaultPerks = autoGenerateDefaultPerks;
	}

	/**
	 * Gets whether default weapons should be generated automatically.
	 */
	public boolean doesAutoGenerateDefaultWeapons() {
		return autoGenerateDefaultWeapons;
	}

	/**
	 * Sets whether default weapons should be generated automatically.
	 */
	public void setAutoGenerateDefaultWeapons(boolean autoGenerateDefaultWeapons) {
		this.autoGenerateDefaultWeapons = autoGenerateDefaultWeapons;
	}

	/**
	 * Gets the interval between auto-saves (minutes).
	 */
	public int getAutoSaveTimerInterval() {
		return autoSaveTimerInterval;
	}

	/**
	 * Sets the interval between auto-saves (minutes).
	 */
	public void setAutoSaveTimerInterval(int autoSaveTimerInterval) {

		this.autoSaveTimerInterval = autoSaveTimerInterval < 1 ? DEFAULT_AUTO_SAVE_TIMER_INTERVAL : autoSaveTimerInterval;

		int delay = autoSaveTimerInterval * 60 * 1000;

		PluginCore.getFilingService().getAutoSaveTimer().scheduleAtFixedRate(new TimerTask() {
			@Override
			public void run() {
				PluginCore.autoSave();
			}
		}, delay, delay);
	}

	/**
	 * Gets whether debugging is currently enabled.
	 */
	public boolean isDebuggingEnabled() {
		return enableDebugging;
	}

	/**
	 * Sets whether debugging is enabled.
	 */
	public void setEnableDebugging(boolean enableDebugging) {
		this.enableDebugging = enableDebugging;
	}

	/**
	 * Gets the position tool item.
	 */
	public Material getPositionToolItem() {
		return positionToolItem;
	}

	/**
	 * Sets the position tool item.
	 */
	public void setPositionToolItem(Material positionToolItem) {
		this.positionToolItem = positionToolItem;
	}

	/**
	 * Gets the spawning tool item
	 */
	public Material getSpawningToolItem() {
		return spawningToolItem;
	}

	/**
	 * Sets the spawning tool item.
	 */
	public void setSpawningToolItem(Material spawningToolItem) {
		this.spawningToolItem = spawningToolItem;
	}
	//endregion
}